<%= render 'datashift_journey/shared/errors', form: form %>
<%= render 'datashift_journey/state_jumper/toolbar' %>

<% state = journey_plan.state %>

<% url = local_assigns[:form_url] ? form_url : datashift_journey.edit_journey_plan_path %>
<% method = local_assigns[:form_method] ? form_method : :post %>

<%= form_for form, as: state, url: url, method: method, class: 'form' do |f| %>

  <%= hidden_field_tag "rendered_state", local_assigns[:rendered_state] || state  %>

  <%= render_if_exists state, form: form, f: f, journey_plan: journey_plan %>
<% end %>
